(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"0b6a5fce95cc6be643c8":function(e,t,n){var a=n("d1b98b961818c2b0c25f");"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("81325eb2f60ee91338da")(a,r);a.locals&&(e.exports=a.locals)},"57b6c1419ffe50cf8eee":function(e,t,n){(t=e.exports=n("0ec10d64fe1c5691a934")(!1)).push([e.i,"._1q4V-Xm8DpnMlz7R_SHZDE {\n  padding: 8px;\n}\n._1q4V-Xm8DpnMlz7R_SHZDE ._2sIEMq1uG6Umq6iw6ciwM4 {\n  min-height: 40px;\n}\n.vS-xiE-385Mvw0Pc3dbv1 {\n  width: 28px;\n}\n.kSxmsrsfAmkwdt9oR3viI {\n  width: 100%;\n}\n",""]),t.locals={rows:"_1q4V-Xm8DpnMlz7R_SHZDE",rowBlock:"_2sIEMq1uG6Umq6iw6ciwM4",color:"vS-xiE-385Mvw0Pc3dbv1",colControl:"kSxmsrsfAmkwdt9oR3viI"}},d1b98b961818c2b0c25f:function(e,t,n){(t=e.exports=n("0ec10d64fe1c5691a934")(!1)).push([e.i,"._24fz2HwY8KJrtd3FW4zkjt {\n  width: 80px;\n  margin-right: 8px;\n}\n._1Pwl0V2fmG4y409Ca6jyuz i {\n  margin-left: 8px;\n}\n._1Pwl0V2fmG4y409Ca6jyuz i:hover {\n  cursor: pointer;\n}\n._2UDzx1oc-P3i2RF7VxXzzl {\n  max-height: 600px;\n  overflow-y: auto;\n}\n",""]),t.locals={tableInput:"_24fz2HwY8KJrtd3FW4zkjt",tableEditCell:"_1Pwl0V2fmG4y409Ca6jyuz",headerTable:"_2UDzx1oc-P3i2RF7VxXzzl"}},d7cf1b4945a97d9fb8a7:function(e,t,n){var a=n("57b6c1419ffe50cf8eee");"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n("81325eb2f60ee91338da")(a,r);a.locals&&(e.exports=a.locals)},f593cab48525cf136650:function(e,t,n){"use strict";n.r(t);n("4a759ee8cf8f3f4b670f");var a=n("551043c40baf237ce2e2"),r=(n("b6dea8c656e9b079e962"),n("cbdfc24198922b753629")),o=(n("0f9a9c5ecb6fa912b561"),n("1ae6696666b402e06efe")),c=(n("19a38d6cfba2b0cfb31c"),n("34562df72a6e85f81d78")),l=(n("50adc79a6192ea5d3ce5"),n("95deaa0c1401b2b1958d")),i=(n("ad72dfadcd5dc22be533"),n("88c2720f8fd77948d588")),f=(n("bdc00f51a8f1da9739f0"),n("fce7ac3c38109223f18e")),u=(n("76cd33304c92205ded05"),n("64e5cbd4792a7907b80b")),s=(n("59a329e51bb913a68736"),n("0c748ae854469ccdd085")),d=(n("52dbc09a058e7683b091"),n("84fab28057acb3e75237")),m=(n("9b23778c27c05c6bd723"),n("4bbbfbb7fceaa1df400e")),p=n("246df9874efc20494c0b"),y=n.n(p),b=n("0d9e341897112a3de7da"),g=n.n(b),h=n("55c69f0ea731e712b8f3"),v=n("3bb731ebd40812aa4cb1"),C=n("39619bfaf8da2322503f"),E=n("a21591280e67f469f560"),w=n("0b6a5fce95cc6be643c8"),k=n.n(w),S=n("d7cf1b4945a97d9fb8a7"),j=n.n(S);function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done)&&(n.push(c.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"===typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=M(e);if(t){var r=M(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==x(t)&&"function"!==typeof t?K(e):t}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=m.a.Group,V=d.a.Group,J=d.a.Button,q=y.a.createElement(J,{value:"flex-start"},"\u5de6\u5bf9\u9f50"),T=y.a.createElement(J,{value:"center"},"\u5c45\u4e2d"),U=y.a.createElement(J,{value:"flex-end"},"\u53f3\u5bf9\u9f50"),B=y.a.createElement(u.a,{type:"arrow-up"}),W=y.a.createElement(u.a,{type:"arrow-down"}),X=y.a.createElement(i.a,{span:1},y.a.createElement(l.a,{type:"flex",justify:"end"},y.a.createElement(a.a,{title:"\u8868\u683c\u6570\u636e\u5217\u8bf7\u5728\u5916\u90e8\u62d6\u62fd\u4ee5\u66f4\u6539\u987a\u5e8f"},y.a.createElement(u.a,{type:"info-circle"})))),Z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(p,e);var t,n,a,d=R(p);function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),F(K(t=d.call(this,e)),"headerNameInput",y.a.createRef()),F(K(t),"moveUp",(function(){var e=t.state,n=e.localConfig,a=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?s.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0a\u79fb\u7684\u5217"):(r.forEach((function(e){var t=a[e],r=t?t.children:n,o=r.findIndex((function(t){return t.key===e}));if(!(o<1)){var c=r[o-1];r[o-1]=r[o],r[o]=c}})),t.setState({localConfig:N(n)}))})),F(K(t),"moveDown",(function(){var e=t.state,n=e.localConfig,a=e.mapHeaderParent,r=e.currentSelectedKeys;r.length<=0?s.a.warning("\u8bf7\u52fe\u9009\u8981\u4e0b\u79fb\u7684\u5217"):(r.forEach((function(e){var t=a[e],r=t?t.children:n,o=r.findIndex((function(t){return t.key===e}));if(!(o>=r.length-1)){var c=r[o];r[o]=r[o+1],r[o+1]=c}})),t.setState({localConfig:N(n)}))})),F(K(t),"mergeColumns",(function(){var e=t.state,n=e.localConfig,a=e.mapHeader,r=e.mapHeaderParent,o=e.currentSelectedKeys;if(o.length<=0)s.a.warning("\u8bf7\u52fe\u9009\u8981\u5408\u5e76\u7684\u5217");else{var c=[];if(o.forEach((function(e){for(var t=a[e];o.includes(t.key);){var n=r[t.key];if(!n)break;t=n}c.findIndex((function(e){return e.key===t.key}))<0&&c.push(t)})),c.every((function(e){return!r[e.key]}))){var l={key:Object(h.g)(5),headerName:"\u65b0\u5efa\u5408\u5e76\u5217",alias:null,visualType:null,isGroup:!0,style:P(P({},v.a),{},{justifyContent:"center"}),children:c},i=n.length-c.length;i=c.reduce((function(e,t){return Math.min(e,n.findIndex((function(e){return e.key===t.key})))}),i);var f=c.map((function(e){return e.key})),u=n.filter((function(e){return!f.includes(e.key)}));u.splice(i,0,l);var d=H(t.getMapHeaderKeyAndConfig(u),2),m=d[0],p=d[1];t.setState({localConfig:u,mapHeader:m,mapHeaderParent:p,currentEditingConfig:l,currentSelectedKeys:[]},(function(){t.headerNameInput.current.focus(),t.headerNameInput.current.select()}))}else s.a.warning("\u52fe\u9009\u7684\u5217\u5e94\u662f\u5f53\u524d\u6700\u4e0a\u7ea7\u5217")}})),F(K(t),"cancel",(function(){t.props.onCancel()})),F(K(t),"save",(function(){t.props.onSave(t.state.localConfig)})),F(K(t),"propChange",(function(e,n){return function(a){var r=a.target?a.target.value:a,o=t.state.localConfig,c=e.key,l=function(e){var t=c===e.key;return t&&(e.style[n]=r),t};o.some((function(e){return t.traverseHeaderConfig(e,null,l)})),t.setState({localConfig:N(o)})}})),F(K(t),"editHeaderName",(function(e){return function(){t.state.localConfig.some((function(n){return t.traverseHeaderConfig(n,null,(function(n){var a=n.key===e;return a&&t.setState({currentEditingConfig:n},(function(){t.headerNameInput.current.focus(),t.headerNameInput.current.select()})),a}))}))}})),F(K(t),"deleteHeader",(function(e){return function(){var n=t.state,a=n.localConfig,r=(n.mapHeader,n.mapHeaderParent);a.some((function(n){return t.traverseHeaderConfig(n,null,(function(t){var n=t.key===e;if(n){var o,c,l=r[t.key];if(l)o=l.children.findIndex((function(e){return e.key===t.key})),(c=l.children).splice.apply(c,[o,1].concat(N(t.children)));else o=a.findIndex((function(e){return e.key===t.key})),a.splice.apply(a,[o,1].concat(N(t.children)))}return n}))}));var o=H(t.getMapHeaderKeyAndConfig(a),2),c=o[0],l=o[1];t.setState({mapHeader:c,mapHeaderParent:l,localConfig:a})}})),F(K(t),"saveEditingHeaderName",(function(){var e=t.headerNameInput.current.input.value;if(e){var n=t.state,a=n.localConfig,r=n.currentEditingConfig;a.some((function(n){return t.traverseHeaderConfig(n,null,(function(t){var n=t.key===r.key;return n&&(t.headerName=e),n}))})),t.setState({localConfig:N(a),currentEditingConfig:null})}else s.a.warning("\u8bf7\u8f93\u5165\u548c\u5e76\u5217\u540d\u79f0")})),F(K(t),"columns",[{title:"\u8868\u683c\u5217",dataIndex:"headerName",key:"headerName",render:function(e,n){var a=t.state.currentEditingConfig,r=n.key,o=n.headerName,c=n.alias,l=n.isGroup;if(!a||a.key!==r)return l?y.a.createElement("span",{className:k.a.tableEditCell},y.a.createElement("label",null,c||o),y.a.createElement(u.a,{type:"edit",onClick:t.editHeaderName(r)}),y.a.createElement(u.a,{type:"delete",onClick:t.deleteHeader(r)})):y.a.createElement("label",null,c||o);var i=a.headerName;return y.a.createElement(y.a.Fragment,null,y.a.createElement(f.a,{ref:t.headerNameInput,size:"small",className:k.a.tableInput,defaultValue:i}),y.a.createElement(m.a,{type:"primary",size:"small",onClick:t.saveEditingHeaderName},"\u786e\u5b9a"))}},{title:"\u80cc\u666f\u8272",dataIndex:"backgroundColor",key:"backgroundColor",width:60,render:function(e,n){var a=n.style.backgroundColor;return y.a.createElement(l.a,{type:"flex",justify:"center"},y.a.createElement(i.a,null,y.a.createElement(C.a,{className:j.a.color,value:a,onChange:t.propChange(n,"backgroundColor")})))}},{title:"\u5b57\u4f53",dataIndex:"font",key:"font",width:285,render:function(e,n){var a=n.style,r=a.fontSize,o=a.fontFamily,f=a.fontColor,u=a.fontStyle,s=a.fontWeight;return y.a.createElement(y.a.Fragment,null,y.a.createElement(l.a,{gutter:8,type:"flex",align:"middle",className:j.a.rowBlock},y.a.createElement(i.a,{span:14},y.a.createElement(c.a,{size:"small",className:j.a.colControl,placeholder:"\u5b57\u4f53",value:o,onChange:t.propChange(n,"fontFamily")},v.b)),y.a.createElement(i.a,{span:6},y.a.createElement(c.a,{size:"small",className:j.a.colControl,placeholder:"\u6587\u5b57\u5927\u5c0f",value:r,onChange:t.propChange(n,"fontSize")},v.c)),y.a.createElement(i.a,{span:4},y.a.createElement(C.a,{className:j.a.color,value:f,onChange:t.propChange(n,"fontColor")}))),y.a.createElement(l.a,{gutter:8,type:"flex",align:"middle",className:j.a.rowBlock},y.a.createElement(i.a,{span:12},y.a.createElement(c.a,{size:"small",className:j.a.colControl,value:u,onChange:t.propChange(n,"fontStyle")},v.d)),y.a.createElement(i.a,{span:12},y.a.createElement(c.a,{size:"small",className:j.a.colControl,value:s,onChange:t.propChange(n,"fontWeight")},v.e))))}},{title:"\u5bf9\u9f50",dataIndex:"justifyContent",key:"justifyContent",width:180,render:function(e,n){var a=n.style.justifyContent;return y.a.createElement(V,{size:"small",value:a,onChange:t.propChange(n,"justifyContent")},q,T,U)}}]),F(K(t),"modalFooter",[y.a.createElement(m.a,{key:"cancel",size:"large",onClick:t.cancel},"\u53d6 \u6d88"),y.a.createElement(m.a,{key:"submit",size:"large",type:"primary",onClick:t.save},"\u4fdd \u5b58")]),F(K(t),"tableRowSelection",{hideDefaultSelections:!0,onChange:function(e){t.setState({currentSelectedKeys:e})}});var n=Object(E.fromJS)(e.config).toJS(),a=H(t.getMapHeaderKeyAndConfig(n),2),r=a[0],o=a[1];return t.state={localConfig:n,currentEditingConfig:null,mapHeader:r,mapHeaderParent:o,currentSelectedKeys:[]},t}return t=p,(n=[{key:"componentWillReceiveProps",value:function(e){if(e.config!==this.props.config){var t=Object(E.fromJS)(e.config).toJS(),n=H(this.getMapHeaderKeyAndConfig(t),2),a=n[0],r=n[1];this.setState({localConfig:t,mapHeader:a,mapHeaderParent:r,currentSelectedKeys:[]})}}},{key:"getMapHeaderKeyAndConfig",value:function(e){var t=this,n={},a={};return e.forEach((function(e){return t.traverseHeaderConfig(e,null,(function(e,t){return n[e.key]=e,a[e.key]=t,!1}))})),[n,a]}},{key:"traverseHeaderConfig",value:function(e,t,n){var a=this,r=n(e,t);return r||(r=Array.isArray(e.children)&&e.children.some((function(t){return a.traverseHeaderConfig(t,e,n)})))}},{key:"render",value:function(){var e,t=this.props.visible,n=this.state,a=n.localConfig,c=n.currentSelectedKeys,f=P(P({},this.tableRowSelection),{},{selectedRowKeys:c}),u=g()((F(e={},j.a.rows,!0),F(e,k.a.headerTable,!0),e));return y.a.createElement(r.a,{title:"\u8868\u5934\u6837\u5f0f\u4e0e\u5206\u7ec4",width:1e3,maskClosable:!1,footer:this.modalFooter,visible:t,onCancel:this.cancel,onOk:this.save},y.a.createElement("div",{className:j.a.rows},y.a.createElement(l.a,{gutter:8,className:j.a.rowBlock,type:"flex",align:"middle"},y.a.createElement(i.a,{span:4},y.a.createElement(m.a,{type:"primary",onClick:this.mergeColumns},"\u5408\u5e76")),y.a.createElement(i.a,{span:19},y.a.createElement(l.a,{gutter:8,type:"flex",justify:"end",align:"middle"},y.a.createElement(G,null,y.a.createElement(m.a,{onClick:this.moveUp},B,"\u4e0a\u79fb"),y.a.createElement(m.a,{onClick:this.moveDown},"\u4e0b\u79fb",W)))),X)),y.a.createElement("div",{className:u},y.a.createElement(l.a,{gutter:8,className:j.a.rowBlock},y.a.createElement(i.a,{span:24},y.a.createElement(o.a,{bordered:!0,pagination:!1,columns:this.columns,dataSource:a,rowSelection:f})))))}}])&&_(t.prototype,n),a&&_(t,a),p}(y.a.PureComponent);t.default=Z}}]);